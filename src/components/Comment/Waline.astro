---
import themeConfig from "@/config";

const waline = themeConfig.comments.waline;
const isReady = waline.enabled && waline.serverURL;
---

{
  isReady && (
    <section id="comments-waline">
      <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />
      <div id="waline"></div>
      <script is:inline type="module" define:vars={{ waline }}>
        import { init } from "https://unpkg.com/@waline/client@v3/dist/waline.js";

        init({
          el: "#waline",
          serverURL: waline.serverURL,
          lang: waline.lang,
          pageview: waline.pageview,
          comment: waline.comment,
          search: waline.search,
          login: waline.login,
          dark: waline.dark,
          requiredMeta: waline.requiredMeta,
          emoji: waline.emoji,
        });
      </script>
    </section>
  )
}
